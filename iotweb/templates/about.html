<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/static/images/favicon.ico">

    <title>IoTis.Fun</title>

    <!-- Bootstrap core CSS --><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- Custom styles for this template -->
    <link href="/static/css/cover.css" rel="stylesheet">
    <script defer src="/static/js/fontawesome-all.js"></script>
  </head>

  <body class="text-center">
    <a href="https://github.com/sumsted/iot-demo" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#ff3860; color:#68d7d7; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <div class="cover-container d-flex h-100 p-3 mx-auto flex-column">
      <header class="masthead mb-auto">
        <div class="inner">
          <h3 class="masthead-brand"><i class="far fa-lightbulb brand-icon"></i>IoTis.fun</h3>
          <nav class="nav nav-masthead justify-content-center">
            <a class="nav-link" href="/">Home</a>
            <a class="nav-link" href="/device">Device</a>
            <a class="nav-link" href="/watch">Watch</a>
            <a class="nav-link active" href="#">About</a>
          </nav>
        </div>
      </header>

      <main role="main" class="inner cover">

<h1 id="iotdemo">IoT Demo</h1>

<p class="copytext">This demonstration can be found running at https://iotis.fun. </p>

<p><img style="width:75%" src="/static/images/overview.png" alt="Overview" /></p>

<h2 id="iotdevices">IoT Devices</h2>

<p class="copytext">All devices here are built using the ESP32 from Espressif. This microcontroller has wireless capabilities, WiFi, Bluetooth and BLE. The ESP32 can act as a WiFi access point or client. The ESP32 has a large number of GPIO pins, a hall sensor, temperature, button, led, capacitive touch pins and more. The code for the demo boards may be found in /esp32.</p>

<p><img style="width:75%" src="/static/images/esp32b.png" alt="ESP32" /></p>

<h3 id="hall">Hall</h3>

<p class="copytext">The Hall board shows how a hall sensor may be used to measure revolutions per minute. Spin the spinner. The sketch counts the number of revolutions over a 5 second period. The lights light up as the revolutions increase. The maximum number of RPMs in a 30 second period are sent up to the IoT Hub.</p>

<p><img style="width:75%" src="/static/images/hall.png" alt="Hall" /></p>

<h3 id="touch">Touch</h3>

<p class="copytext">The Touch board uses the built in capacitive touch capabilities of the ESP32 to measure changes in capacitance across a circuit. Use enough of these sensors and you can build your own touch pad or display. If you are able to light the red light, the board will send an event to the IoT Hub.</p>

<p><img style="width:75%" src="/static/images/touch.png" alt="Touch" /></p>

<h3 id="dropbox">Dropbox</h3>

<p class="copytext">The drop board uses the onboard button on the ESP32. When the right button is pressed a "bad" event is sent to the IoT hub indicating that the dropbox needs service. The subscriber should send this event on to Salesforce so that a technician may be dispatched. Every 30 seconds the dropbox board will send a "good" even indicating that the the dropbox is healthy.</p>

<p><img style="width:75%" src="/static/images/dropbox.png" alt="Dropbox" /></p>

<h3 id="robotcontroller">Robot Controller</h3>

<p class="copytext">The robot board sends commands to the robot. The board communicates directly to the robot WiFi access point and sends UDP packets to the robot controller indicating the action the robot should take.</p>

<p><img style="width:75%" src="/static/images/robotcontroller.png" alt="Robot Controller" /></p>

<h3 id="web">Web</h3>

<p class="copytext">The web device simulates an IoT device. It pushes events to IoT Hub. These events are picked up by the subscriber. The web device may be found at https://iotis.fun/device.</p>

<p><img style="width:30%" src="/static/images/web.png" alt="Web" /></p>

<h2 id="constraineddevicegateway">Constrained Device Gateway</h2>

<p class="copytext">A constrained device gateway is needed for those devices unable to directly connect to the IoT Hub, either because of network routing, security, or the devices is too simple to create the required request. The gateway is made up of three components. There's a web route that captures events from each device. This route captures device id, key, and a state. Once captured the web route places the event on a queue. In this example we use Redis to act as a queue for our events. The queue is needed to help the gateway throttle activity into the hub and to ensure that no events are lost should network access to the IoT Hub be lost. The IoT Hub client pops events off the queue and posts them to the IoT Hub. The gateway may also act as a filter preventing unneeded events from entering the IoT Hub. Thing I'd change: Run the gateway closer to the devices not remotely.</p>

<p><img style="width:75%" src="/static/images/gateway.png" alt="Constrained Device Gateway" /></p>

<h2 id="iothub">IoT Hub</h2>

<p class="copytext">The IoT Hub provides a complete device management solution. Devices may be created programatically or through the console. Once defined the devices are assigned keys and endpoints that allow the device to send events over a number of different protocols including HTTP and MQTT. MQTT is lighter weight protocol than HTTP and is focused on data transmission. An MQTT connection is bi-directional allowing a connection to publish and subscribe. This makes it useful for pushing updates down to devices. In HTTP devices must pole and pull for updates. Along with IoT Hub, Azure provides many ways to consume the device events. Service Bus Queues may be established to filter the relevant events needed by subscribers.  IoT Hub may capture events from a variety of sources supporting a variety of use cases allowing centralized management of all device assets. Separate queues may be established for each use case allowing filter of events specific for that use case.</p>

<p><img style="width:75%" src="/static/images/iothub.png" alt="IoT Hub" /></p>

<h2 id="eventsubscription">Event Subscription</h2>

<p class="copytext">The subscription process uses a library provided by Azure to pull events from a service bus queue.  This python library is a wrapper to IoT Hub Client C Library and must be compiled for the platform that it will run on. The subscriber runs continually waiting for events to be posted on the Azure Service Bus Queue being watched. As events are picked up they are passed along to the appropriate subscribers. Thing i'd change:  Take advantage of the service bus queue to filter and route specific events to specific queues. I'd setup each consumer with it's own subscriber.</p>

<p><img style="width:75%" src="/static/images/subscription.png" alt="Event Subscription" /></p>

<h2 id="salesforce">Salesforce Platform Events</h2>

<p class="copytext">Platform Events are a new concept on the Salesforce platform. They allow processes to publish events, state, telemetry on to a bus that other Salesforce processes can consume and take action on. Platform Events transcend the Salesforce environment. Events may be consumed from processes outside of Salesforce and external processes may publish events on to the Salesforce event bus. Events can be a replacement for other Salesforce concepts like process builder and flows. A Platform Event resembles a Salesforce object.</p>

<p class="copytext">IoT Orchestration is a graphical no code tool available in Salesforce that allows you to subscribe to events published by assets, define state diagrams for the expected events, visualize activity, and to take action on the events, such as creating a case or opportunity.</p>

<p><img style="width:75%" src="/static/images/salesforce.png" alt="Salesforce"/></p>
      </main>

      <footer class="mastfoot mt-auto">
        <div class="inner">
          <p></p>
        </div>
      </footer>
    </div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  </body>
</html>
